{"version":3,"sources":["src/components/InsufficientBalanceButton.tsx","src/components/ApproveButton.tsx","src/components/LPTokenSelect.tsx","src/hooks/useLPTokensState.tsx","src/components/Select.tsx","node_modules/eth-permit/dist/eth-permit.js","node_modules/eth-permit/dist/rpc.js","node_modules/eth-permit/dist/lib.js","node_modules/utf8/utf8.js","src/hooks/useSushiRoll.tsx","src/hooks/useMigrateState.tsx","src/screens/MigrateScreen.tsx"],"names":["InsufficientBalanceButton","symbol","t","useTranslation","title","disabled","ApproveButton","props","approveToken","useContext","EthersContext","useState","loading","setLoading","onPress","useCallback","a","async","token","onError","address","spender","tx","wait","onSuccess","hidden","containerStyle","marginBottom","Spacing","tiny","LPTokenList","state","emptyText","Item","renderItem","item","key","selected","onSelectToken","setSelectedLPToken","data","lpTokens","sort","p1","p2","m1","multiplier","m2","apy","length","EmptyList","text","keyExtractor","style","margin","normal","textAlign","width","LPTokenItem","textMedium","useColors","balance","formatBalance","decimals","ITEM_SEPARATOR_HEIGHT","alignItems","tokenA","small","replaceWETH","tokenB","marginLeft","medium","caption","flex","light","color","LPTokenSelect","expanded","selectedLPToken","onExpand","updatingLPTokens","useLPTokensState","mode","useTokenPairState","provider","tokens","lastTimeRefreshed","setLastTimeRefreshed","setLPTokens","selectedLPTokenAllowed","setSelectedLPTokenAllowed","pair","setPair","amount","setAmount","getPair","useSDK","updateLPTokens","fetchMyPools","fetchPools","fetchMyLPTokens","fetchMyUniswapLPTokens","useEffect","useAsyncEffect","undefined","useDelayedOnBlockEffect","block","fromToken","toToken","updateLastTimeRefreshed","Date","now","paddingLeft","paddingRight","selectable","setOption","option","fontWeight","note","marginTop","description","Select","options","map","__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","signERC2612Permit","signDaiPermit","rpc_1","lib_1","MAX_INT","EIP712Domain","name","type","zeros","numZeros","padEnd","getTokenName","hexToUtf8","call","substr","getDomain","tokenAddress","chainId","all","getChainId","version","verifyingContract","holder","expiry","nonce","message","allowed","typedData","domain","types","Permit","primaryType","createTypedDaiData","sig","signData","assign","owner","deadline","createTypedERC2612Data","setChainIdOverride","send","method","params","payload","id","Math","floor","random","callback","err","error","console","_provider","sendAsync","fromAddress","typeData","typeDataString","JSON","stringify","catch","r","slice","s","v","parseInt","chainIdOverride","to","__importDefault","mod","__esModule","utf8_1","hex","str","code","l","replace","split","reverse","join","i","String","fromCharCode","default","decode","root","byteArray","byteCount","byteIndex","stringFromCharCode","ucs2decode","string","extra","output","counter","charCodeAt","push","checkScalarValue","codePoint","Error","toString","toUpperCase","createByte","shift","encodeCodePoint","readContinuationByte","continuationByte","decodeSymbol","byte1","encode","codePoints","index","byteString","tmp","array","ucs2encode","useSushiRoll","ethereum","migrate","lpToken","signer","sushiRoll","getContract","SUSHI_ROLL","getTime","args","ethers","constants","Zero","estimateGas","gasLimit","mul","div","logTransaction","arg","migrateWithPermit","getAddress","permit","useMigrateState","getTokenAllowance","updateTokens","setMode","migrating","setMigrating","isWalletConnect","minAllowance","BigNumber","from","pow","sub","allowance","gte","onMigrate","parseBalance","func","Migrate","View","large","Border","MigrateModeSelect","find","UniswapLiquidityScreen","Heading","AmountInput","TokenInput","onAmountChanged","AmountInfo","isEmptyValue","InfoBox","Meta","label","Controls","setError","gt","FetchingButton","ErrorMessage","MigrateButton","goToFarm","useLinker","Button","MigrateScreen","Screen","Container","BackgroundImage","Content","Title","Text","Platform","OS","WebFooter"],"mappings":"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","file":"static/js/14.515c3ba4.chunk.js","sourcesContent":["import React from \"react\";\n\nimport useTranslation from \"../hooks/useTranslation\";\nimport Button from \"./Button\";\n\nconst InsufficientBalanceButton = ({ symbol }: { symbol: string }) => {\n    const t = useTranslation();\n    return <Button title={symbol ? t(\"insufficient-\", { symbol }) : t(\"insufficient-balance\")} disabled={true} />;\n};\nexport default InsufficientBalanceButton;\n","import React, { FC, useCallback, useContext, useState } from \"react\";\nimport { View } from \"react-native\";\n\nimport { Spacing } from \"../constants/dimension\";\nimport { EthersContext } from \"../context/EthersContext\";\nimport useTranslation from \"../hooks/useTranslation\";\nimport Token from \"../types/Token\";\nimport Button from \"./Button\";\n\nexport interface ApproveButtonProps {\n    token: Token;\n    spender: string;\n    onSuccess: () => void;\n    onError: (e) => void;\n    hidden?: boolean;\n}\n\nconst ApproveButton: FC<ApproveButtonProps> = props => {\n    const t = useTranslation();\n    const { approveToken } = useContext(EthersContext);\n    const [loading, setLoading] = useState(false);\n    const onPress = useCallback(async () => {\n        if (props.token) {\n            props.onError({});\n            setLoading(true);\n            try {\n                const tx = await approveToken(props.token.address, props.spender);\n                if (tx) {\n                    await tx.wait();\n                    props.onSuccess();\n                }\n            } catch (e) {\n                props.onError(e);\n            } finally {\n                setLoading(false);\n            }\n        }\n    }, [props.token]);\n    if (props.hidden) return <View />;\n    return (\n        <Button\n            title={t(\"approve\") + \" \" + (props.token?.symbol || \"\")}\n            onPress={onPress}\n            loading={loading}\n            containerStyle={{ marginBottom: Spacing.tiny }}\n        />\n    );\n};\n\nexport default ApproveButton;\n","import React, { FC, useCallback } from \"react\";\nimport { FlatList, View, ViewStyle } from \"react-native\";\n\nimport { Spacing } from \"../constants/dimension\";\nimport useColors from \"../hooks/useColors\";\nimport { LPTokensState } from \"../hooks/useLPTokensState\";\nimport LPToken from \"../types/LPToken\";\nimport { formatBalance } from \"../utils\";\nimport CloseIcon from \"./CloseIcon\";\nimport Expandable from \"./Expandable\";\nimport FlexView from \"./FlexView\";\nimport { ITEM_SEPARATOR_HEIGHT } from \"./ItemSeparator\";\nimport Loading from \"./Loading\";\nimport Selectable from \"./Selectable\";\nimport SelectIcon from \"./SelectIcon\";\nimport Text from \"./Text\";\nimport TokenLogo from \"./TokenLogo\";\n\nexport type LPTokenSelectFilter = \"balance\" | \"amountDeposited\" | \"\";\n\nexport interface LPTokenSelectProps {\n    state: LPTokensState;\n    title: string;\n    emptyText: string;\n    Item: FC<LPTokenItemProps>;\n    style?: ViewStyle;\n}\n\nexport interface LPTokenItemProps {\n    token: LPToken;\n    selected: boolean;\n    onSelectToken: (token: LPToken) => void;\n}\n\nconst LPTokenSelect: FC<LPTokenSelectProps> = props => {\n    const onUnselectToken = () => props.state.setSelectedLPToken();\n    return (\n        <View style={props.style}>\n            <Expandable\n                title={props.title}\n                expanded={!props.state.selectedLPToken}\n                onExpand={() => props.state.setSelectedLPToken()}>\n                <LPTokenList state={props.state} emptyText={props.emptyText} Item={props.Item} />\n            </Expandable>\n            {props.state.selectedLPToken && (\n                <props.Item token={props.state.selectedLPToken} selected={true} onSelectToken={onUnselectToken} />\n            )}\n        </View>\n    );\n};\n\n// tslint:disable-next-line:max-func-body-length\nconst LPTokenList = ({\n    state,\n    emptyText,\n    Item\n}: {\n    state: LPTokensState;\n    emptyText: string;\n    Item: FC<LPTokenItemProps>;\n}) => {\n    const renderItem = useCallback(\n        ({ item }) => {\n            return <Item key={item.symbol} token={item} selected={false} onSelectToken={state.setSelectedLPToken} />;\n        },\n        [state.setSelectedLPToken]\n    );\n    const data = state.lpTokens.sort((p1, p2) => {\n        const m1 = p1.multiplier || 0;\n        const m2 = p2.multiplier || 0;\n        return m1 === m2 ? (p2.apy || 0) - (p1.apy || 0) : m2 - m1;\n    });\n    return state.loading ? (\n        <Loading />\n    ) : data.length === 0 ? (\n        <EmptyList text={emptyText} />\n    ) : (\n        <FlatList keyExtractor={item => item.symbol} data={data} renderItem={renderItem} />\n    );\n};\n\nconst EmptyList = ({ text }: { text: string }) => {\n    return (\n        <View style={{ margin: Spacing.normal }}>\n            <Text disabled={true} style={{ textAlign: \"center\", width: \"100%\" }}>\n                {text}\n            </Text>\n        </View>\n    );\n};\n\nexport const LPTokenItem: FC<LPTokenItemProps> = props => {\n    const { textMedium } = useColors();\n    const balance = formatBalance(props.token.balance, props.token.decimals, 6);\n    const onPress = useCallback(() => {\n        props.onSelectToken(props.token);\n    }, [props.onSelectToken, props.token]);\n    return (\n        <Selectable\n            selected={props.selected}\n            onPress={onPress}\n            containerStyle={{ marginBottom: ITEM_SEPARATOR_HEIGHT }}>\n            <FlexView style={{ alignItems: \"center\" }}>\n                <TokenLogo token={props.token.tokenA} small={true} replaceWETH={true} />\n                <TokenLogo token={props.token.tokenB} small={true} replaceWETH={true} style={{ marginLeft: 4 }} />\n                <Text medium={true} caption={true} style={{ marginLeft: Spacing.tiny }}>\n                    {props.token.tokenA.symbol}-{props.token.tokenB.symbol}\n                </Text>\n                <View style={{ flex: 1, marginLeft: Spacing.tiny }}>\n                    <Text caption={true} light={true} style={{ textAlign: \"right\", color: textMedium }}>\n                        {balance}\n                    </Text>\n                </View>\n                {props.selected ? <CloseIcon /> : <SelectIcon />}\n            </FlexView>\n        </Selectable>\n    );\n};\n\nexport default LPTokenSelect;\n","import { useContext, useEffect, useState } from \"react\";\n\nimport { Pair } from \"@sushiswap/sdk\";\nimport useAsyncEffect from \"use-async-effect\";\nimport { EthersContext } from \"../context/EthersContext\";\nimport LPToken from \"../types/LPToken\";\nimport { fetchMyLPTokens, fetchMyPools, fetchMyUniswapLPTokens, fetchPools } from \"../utils/fetch-utils\";\nimport useDelayedOnBlockEffect from \"./useDelayedOnBlockEffect\";\nimport useSDK from \"./useSDK\";\nimport useTokenPairState, { TokenPairState } from \"./useTokenPairState\";\n\nexport interface LPTokensState extends TokenPairState {\n    updateLPTokens: () => Promise<void>;\n    lastTimeRefreshed: number;\n    updateLastTimeRefreshed: () => void;\n    lpTokens: LPToken[];\n    selectedLPToken?: LPToken;\n    setSelectedLPToken: (token?: LPToken) => void;\n    selectedLPTokenAllowed: boolean;\n    setSelectedLPTokenAllowed: (allowed: boolean) => void;\n    pair?: Pair;\n    amount: string;\n    setAmount: (amount: string) => void;\n}\n\ntype Mode = \"pools\" | \"my-pools\" | \"my-lp-tokens\" | \"my-uniswap-lp-tokens\";\n\nlet updatingLPTokens = false;\n\n// tslint:disable-next-line:max-func-body-length\nconst useLPTokensState: (mode: Mode) => LPTokensState = mode => {\n    const state = useTokenPairState();\n    const { provider, address, tokens } = useContext(EthersContext);\n    const [lastTimeRefreshed, setLastTimeRefreshed] = useState(0);\n    const [loading, setLoading] = useState(true);\n    const [lpTokens, setLPTokens] = useState<LPToken[]>([]);\n    const [selectedLPToken, setSelectedLPToken] = useState<LPToken>();\n    const [selectedLPTokenAllowed, setSelectedLPTokenAllowed] = useState(false);\n    const [pair, setPair] = useState<Pair>();\n    const [amount, setAmount] = useState(\"\");\n    const { getPair } = useSDK();\n\n    const updateLPTokens = async () => {\n        if (address && provider && tokens.length > 0 && !updatingLPTokens) {\n            try {\n                updatingLPTokens = true;\n                const data = await (mode === \"my-pools\"\n                    ? fetchMyPools(address, tokens, provider)\n                    : mode === \"pools\"\n                    ? fetchPools(address, tokens, provider)\n                    : mode === \"my-lp-tokens\"\n                    ? fetchMyLPTokens(address, tokens, provider)\n                    : fetchMyUniswapLPTokens(address, tokens, provider));\n                if (data) {\n                    setLPTokens(data);\n                }\n            } finally {\n                updatingLPTokens = false;\n                setLoading(false);\n            }\n        }\n    };\n\n    useEffect(() => {\n        if (!selectedLPToken) {\n            setAmount(\"\");\n        }\n    }, [selectedLPToken]);\n\n    useAsyncEffect(async () => {\n        setLoading(true);\n        setPair(undefined);\n        if (selectedLPToken && provider) {\n            try {\n                setPair(await getPair(selectedLPToken.tokenA, selectedLPToken.tokenB, provider));\n            } catch (e) {\n            } finally {\n                setLoading(false);\n            }\n        } else {\n            setLoading(false);\n        }\n    }, [selectedLPToken, provider]);\n\n    useDelayedOnBlockEffect(\n        async block => {\n            if (address && (mode === \"pools\" || tokens.length > 0)) {\n                if (!block) {\n                    setLoading(true);\n                }\n                await updateLPTokens();\n            }\n        },\n        () => \"updateLPTokens()\",\n        [tokens.length, address, lastTimeRefreshed],\n        0\n    );\n\n    return {\n        ...state,\n        fromToken: state.fromToken || selectedLPToken?.tokenA,\n        toToken: state.toToken || selectedLPToken?.tokenB,\n        updateLPTokens,\n        loading: state.loading || loading,\n        lastTimeRefreshed,\n        updateLastTimeRefreshed: () => {\n            setLastTimeRefreshed(Date.now());\n        },\n        lpTokens,\n        selectedLPToken,\n        setSelectedLPToken,\n        selectedLPTokenAllowed,\n        setSelectedLPTokenAllowed,\n        pair,\n        amount,\n        setAmount\n    };\n};\n\nexport default useLPTokensState;\n","import React, { FC } from \"react\";\nimport { View } from \"react-native\";\n\nimport { Spacing } from \"../constants/dimension\";\nimport CloseIcon from \"./CloseIcon\";\nimport Expandable from \"./Expandable\";\nimport FlexView from \"./FlexView\";\nimport { ITEM_SEPARATOR_HEIGHT } from \"./ItemSeparator\";\nimport Selectable from \"./Selectable\";\nimport SelectIcon from \"./SelectIcon\";\nimport Text from \"./Text\";\n\nexport interface Option {\n    key: string;\n    title: string;\n    description: string;\n}\n\nexport interface SelectProps {\n    title: string;\n    options: Option[];\n    option?: Option;\n    setOption: (option?: Option) => void;\n}\n\nconst Select: FC<SelectProps> = props => {\n    return (\n        <View>\n            <Expandable title={props.title} expanded={!props.option} onExpand={() => props.setOption()}>\n                {props.options.map(option => (\n                    <Item\n                        key={option.key}\n                        option={option}\n                        setOption={props.setOption}\n                        selected={option.key === props.option?.key}\n                    />\n                ))}\n            </Expandable>\n            {props.option && (\n                <Item option={props.option} setOption={props.setOption} selected={true} selectable={false} />\n            )}\n        </View>\n    );\n};\n\nconst Item = (props: {\n    option: Option;\n    setOption?: (option?: Option) => void;\n    selected: boolean;\n    selectable?: boolean;\n}) => {\n    return (\n        <Selectable\n            containerStyle={{ marginBottom: ITEM_SEPARATOR_HEIGHT }}\n            style={{ paddingLeft: Spacing.small + Spacing.tiny, paddingRight: Spacing.small }}\n            selected={props.selected}\n            disabled={props.selectable}\n            onPress={() => props.setOption?.(props.selected ? undefined : props.option)}>\n            <FlexView style={{ alignItems: \"center\" }}>\n                <View style={{ flex: 1 }}>\n                    <Text fontWeight={\"regular\"}>{props.option.title}</Text>\n                    <Text note={true} style={{ marginTop: 4 }}>\n                        {props.option.description}\n                    </Text>\n                </View>\n                {props.selected ? <CloseIcon /> : <SelectIcon />}\n            </FlexView>\n        </Selectable>\n    );\n};\n\nexport default Select;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.signERC2612Permit = exports.signDaiPermit = void 0;\nconst rpc_1 = require(\"./rpc\");\nconst lib_1 = require(\"./lib\");\nconst MAX_INT = '0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff';\nconst EIP712Domain = [\n    { name: \"name\", type: \"string\" },\n    { name: \"version\", type: \"string\" },\n    { name: \"chainId\", type: \"uint256\" },\n    { name: \"verifyingContract\", type: \"address\" },\n];\nconst createTypedDaiData = (message, domain) => {\n    const typedData = {\n        types: {\n            EIP712Domain,\n            Permit: [\n                { name: \"holder\", type: \"address\" },\n                { name: \"spender\", type: \"address\" },\n                { name: \"nonce\", type: \"uint256\" },\n                { name: \"expiry\", type: \"uint256\" },\n                { name: \"allowed\", type: \"bool\" },\n            ],\n        },\n        primaryType: \"Permit\",\n        domain,\n        message,\n    };\n    return typedData;\n};\nconst createTypedERC2612Data = (message, domain) => {\n    const typedData = {\n        types: {\n            EIP712Domain,\n            Permit: [\n                { name: \"owner\", type: \"address\" },\n                { name: \"spender\", type: \"address\" },\n                { name: \"value\", type: \"uint256\" },\n                { name: \"nonce\", type: \"uint256\" },\n                { name: \"deadline\", type: \"uint256\" },\n            ],\n        },\n        primaryType: \"Permit\",\n        domain,\n        message,\n    };\n    return typedData;\n};\nconst NONCES_FN = '0x7ecebe00';\nconst NAME_FN = '0x06fdde03';\nconst zeros = (numZeros) => ''.padEnd(numZeros, '0');\nconst getTokenName = (provider, address) => __awaiter(void 0, void 0, void 0, function* () { return lib_1.hexToUtf8((yield rpc_1.call(provider, address, NAME_FN)).substr(130)); });\nconst getDomain = (provider, token) => __awaiter(void 0, void 0, void 0, function* () {\n    if (typeof token !== 'string') {\n        return token;\n    }\n    const tokenAddress = token;\n    const [name, chainId] = yield Promise.all([\n        getTokenName(provider, tokenAddress),\n        rpc_1.getChainId(provider),\n    ]);\n    const domain = { name, version: '1', chainId, verifyingContract: tokenAddress };\n    return domain;\n});\nexports.signDaiPermit = (provider, token, holder, spender, expiry, nonce) => __awaiter(void 0, void 0, void 0, function* () {\n    const tokenAddress = token.verifyingContract || token;\n    const message = {\n        holder,\n        spender,\n        nonce: nonce || (yield rpc_1.call(provider, tokenAddress, `${NONCES_FN}${zeros(24)}${holder.substr(2)}`)),\n        expiry: expiry || MAX_INT,\n        allowed: true,\n    };\n    const domain = yield getDomain(provider, token);\n    const typedData = createTypedDaiData(message, domain);\n    const sig = yield rpc_1.signData(provider, holder, typedData);\n    return Object.assign(Object.assign({}, sig), message);\n});\nexports.signERC2612Permit = (provider, token, owner, spender, value = MAX_INT, deadline, nonce) => __awaiter(void 0, void 0, void 0, function* () {\n    const tokenAddress = token.verifyingContract || token;\n    const message = {\n        owner,\n        spender,\n        value,\n        nonce: nonce || (yield rpc_1.call(provider, tokenAddress, `${NONCES_FN}${zeros(24)}${owner.substr(2)}`)),\n        deadline: deadline || MAX_INT,\n    };\n    const domain = yield getDomain(provider, token);\n    const typedData = createTypedERC2612Data(message, domain);\n    const sig = yield rpc_1.signData(provider, owner, typedData);\n    return Object.assign(Object.assign({}, sig), message);\n});\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.call = exports.getChainId = exports.setChainIdOverride = exports.signData = exports.send = void 0;\nconst randomId = () => Math.floor(Math.random() * 10000000000);\nexports.send = (provider, method, params) => new Promise((resolve, reject) => {\n    const payload = {\n        id: randomId(),\n        method,\n        params,\n    };\n    const callback = (err, result) => {\n        if (err) {\n            reject(err);\n        }\n        else if (result.error) {\n            console.error(result.error);\n            reject(result.error);\n        }\n        else {\n            resolve(result.result);\n        }\n    };\n    let _provider = provider.provider || provider;\n    if (_provider.sendAsync) {\n        _provider.sendAsync(payload, callback);\n    }\n    else {\n        _provider.send(payload, callback);\n    }\n});\nexports.signData = (provider, fromAddress, typeData) => __awaiter(void 0, void 0, void 0, function* () {\n    const typeDataString = typeof typeData === 'string' ? typeData : JSON.stringify(typeData);\n    const result = yield exports.send(provider, 'eth_signTypedData_v4', [fromAddress, typeDataString])\n        .catch((error) => {\n        if (error.message === 'Method eth_signTypedData_v4 not supported.') {\n            return exports.send(provider, 'eth_signTypedData', [fromAddress, typeData]);\n        }\n        else {\n            throw error;\n        }\n    });\n    return {\n        r: result.slice(0, 66),\n        s: '0x' + result.slice(66, 130),\n        v: parseInt(result.slice(130, 132), 16),\n    };\n});\nlet chainIdOverride = null;\nexports.setChainIdOverride = (id) => { chainIdOverride = id; };\nexports.getChainId = (provider) => __awaiter(void 0, void 0, void 0, function* () { return chainIdOverride || exports.send(provider, 'eth_chainId'); });\nexports.call = (provider, to, data) => exports.send(provider, 'eth_call', [{\n        to,\n        data,\n    }, 'latest']);\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hexToUtf8 = void 0;\nconst utf8_1 = __importDefault(require(\"utf8\"));\nexports.hexToUtf8 = function (hex) {\n    // if (!isHexStrict(hex))\n    //     throw new Error('The parameter \"'+ hex +'\" must be a valid HEX string.');\n    let str = \"\";\n    let code = 0;\n    hex = hex.replace(/^0x/i, '');\n    // remove 00 padding from either side\n    hex = hex.replace(/^(?:00)*/, '');\n    hex = hex.split(\"\").reverse().join(\"\");\n    hex = hex.replace(/^(?:00)*/, '');\n    hex = hex.split(\"\").reverse().join(\"\");\n    let l = hex.length;\n    for (let i = 0; i < l; i += 2) {\n        code = parseInt(hex.substr(i, 2), 16);\n        // if (code !== 0) {\n        str += String.fromCharCode(code);\n        // }\n    }\n    return utf8_1.default.decode(str);\n};\n","/*! https://mths.be/utf8js v3.0.0 by @mathias */\n;(function(root) {\n\n\tvar stringFromCharCode = String.fromCharCode;\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2decode(string) {\n\t\tvar output = [];\n\t\tvar counter = 0;\n\t\tvar length = string.length;\n\t\tvar value;\n\t\tvar extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2encode(array) {\n\t\tvar length = array.length;\n\t\tvar index = -1;\n\t\tvar value;\n\t\tvar output = '';\n\t\twhile (++index < length) {\n\t\t\tvalue = array[index];\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t}\n\t\treturn output;\n\t}\n\n\tfunction checkScalarValue(codePoint) {\n\t\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t}\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction createByte(codePoint, shift) {\n\t\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n\t}\n\n\tfunction encodeCodePoint(codePoint) {\n\t\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\t\treturn stringFromCharCode(codePoint);\n\t\t}\n\t\tvar symbol = '';\n\t\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t\t}\n\t\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\t\tcheckScalarValue(codePoint);\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\t\tsymbol += createByte(codePoint, 12);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\t\treturn symbol;\n\t}\n\n\tfunction utf8encode(string) {\n\t\tvar codePoints = ucs2decode(string);\n\t\tvar length = codePoints.length;\n\t\tvar index = -1;\n\t\tvar codePoint;\n\t\tvar byteString = '';\n\t\twhile (++index < length) {\n\t\t\tcodePoint = codePoints[index];\n\t\t\tbyteString += encodeCodePoint(codePoint);\n\t\t}\n\t\treturn byteString;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction readContinuationByte() {\n\t\tif (byteIndex >= byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\tif ((continuationByte & 0xC0) == 0x80) {\n\t\t\treturn continuationByte & 0x3F;\n\t\t}\n\n\t\t// If we end up here, itâ€™s not a continuation byte\n\t\tthrow Error('Invalid continuation byte');\n\t}\n\n\tfunction decodeSymbol() {\n\t\tvar byte1;\n\t\tvar byte2;\n\t\tvar byte3;\n\t\tvar byte4;\n\t\tvar codePoint;\n\n\t\tif (byteIndex > byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tif (byteIndex == byteCount) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Read first byte\n\t\tbyte1 = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\t// 1-byte sequence (no continuation bytes)\n\t\tif ((byte1 & 0x80) == 0) {\n\t\t\treturn byte1;\n\t\t}\n\n\t\t// 2-byte sequence\n\t\tif ((byte1 & 0xE0) == 0xC0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\t\tif (codePoint >= 0x80) {\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 3-byte sequence (may include unpaired surrogates)\n\t\tif ((byte1 & 0xF0) == 0xE0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\t\tif (codePoint >= 0x0800) {\n\t\t\t\tcheckScalarValue(codePoint);\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 4-byte sequence\n\t\tif ((byte1 & 0xF8) == 0xF0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tbyte4 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t\t(byte3 << 0x06) | byte4;\n\t\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\t\treturn codePoint;\n\t\t\t}\n\t\t}\n\n\t\tthrow Error('Invalid UTF-8 detected');\n\t}\n\n\tvar byteArray;\n\tvar byteCount;\n\tvar byteIndex;\n\tfunction utf8decode(byteString) {\n\t\tbyteArray = ucs2decode(byteString);\n\t\tbyteCount = byteArray.length;\n\t\tbyteIndex = 0;\n\t\tvar codePoints = [];\n\t\tvar tmp;\n\t\twhile ((tmp = decodeSymbol()) !== false) {\n\t\t\tcodePoints.push(tmp);\n\t\t}\n\t\treturn ucs2encode(codePoints);\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\troot.version = '3.0.0';\n\troot.encode = utf8encode;\n\troot.decode = utf8decode;\n\n}(typeof exports === 'undefined' ? this.utf8 = {} : exports));\n","import { useCallback, useContext } from \"react\";\n\nimport { signERC2612Permit } from \"eth-permit\";\nimport { ethers } from \"ethers\";\nimport { SUSHI_ROLL } from \"../constants/contracts\";\nimport { EthersContext } from \"../context/EthersContext\";\nimport LPToken from \"../types/LPToken\";\nimport { getContract } from \"../utils\";\nimport { logTransaction } from \"../utils/analytics-utils\";\n\n// tslint:disable-next-line:max-func-body-length\nconst useSushiRoll = () => {\n    const { ethereum } = useContext(EthersContext);\n    const ttl = 60 * 20;\n\n    const migrate = useCallback(\n        async (lpToken: LPToken, amount: ethers.BigNumber, signer: ethers.Signer) => {\n            const sushiRoll = getContract(\"SushiRoll\", SUSHI_ROLL, signer);\n            const deadline = Math.floor(new Date().getTime() / 1000) + ttl;\n            const args = [\n                lpToken.tokenA.address,\n                lpToken.tokenB.address,\n                amount,\n                ethers.constants.Zero,\n                ethers.constants.Zero,\n                deadline\n            ];\n            const gasLimit = await sushiRoll.estimateGas.migrate(...args);\n            const tx = await sushiRoll.migrate(...args, {\n                gasLimit: gasLimit.mul(120).div(100)\n            });\n            return logTransaction(tx, \"SushiRoll.migrate()\", ...args.map(arg => arg.toString()));\n        },\n        [ethereum]\n    );\n\n    const migrateWithPermit = useCallback(\n        async (lpToken: LPToken, amount: ethers.BigNumber, signer: ethers.Signer) => {\n            const sushiRoll = getContract(\"SushiRoll\", SUSHI_ROLL, signer);\n            const deadline = Math.floor(new Date().getTime() / 1000) + ttl;\n            const permit = await signERC2612Permit(\n                ethereum,\n                lpToken.address,\n                await signer.getAddress(),\n                SUSHI_ROLL,\n                amount.toString(),\n                deadline\n            );\n            const args = [\n                lpToken.tokenA.address,\n                lpToken.tokenB.address,\n                amount,\n                ethers.constants.Zero,\n                ethers.constants.Zero,\n                deadline,\n                permit.v,\n                permit.r,\n                permit.s\n            ];\n            const gasLimit = await sushiRoll.estimateGas.migrateWithPermit(...args);\n            const tx = await sushiRoll.migrateWithPermit(...args, {\n                gasLimit: gasLimit.mul(120).div(100)\n            });\n            return logTransaction(tx, \"SushiRoll.migrateWithPermit()\", ...args.map(arg => arg.toString()));\n        },\n        [ethereum]\n    );\n\n    return {\n        migrate,\n        migrateWithPermit\n    };\n};\n\nexport default useSushiRoll;\n","import { useCallback, useContext, useEffect, useState } from \"react\";\n\nimport { ethers } from \"ethers\";\nimport useAsyncEffect from \"use-async-effect\";\nimport { SUSHI_ROLL } from \"../constants/contracts\";\nimport { EthersContext } from \"../context/EthersContext\";\nimport { parseBalance } from \"../utils\";\nimport useLPTokensState, { LPTokensState } from \"./useLPTokensState\";\nimport useSushiRoll from \"./useSushiRoll\";\n\nexport type MigrateMode = \"permit\" | \"approve\";\n\nexport interface MigrateState extends LPTokensState {\n    mode?: MigrateMode;\n    setMode: (_mode?: MigrateMode) => void;\n    onMigrate: () => Promise<void>;\n    migrating: boolean;\n}\n\n// tslint:disable-next-line:max-func-body-length\nconst useMigrateState: () => MigrateState = () => {\n    const { ethereum } = useContext(EthersContext);\n    const state = useLPTokensState(\"my-uniswap-lp-tokens\");\n    const { provider, signer, getTokenAllowance, updateTokens } = useContext(EthersContext);\n    const { migrate, migrateWithPermit } = useSushiRoll();\n    const [loading, setLoading] = useState(false);\n    const [mode, setMode] = useState<MigrateMode>();\n    const [migrating, setMigrating] = useState(false);\n\n    useEffect(() => {\n        if (ethereum?.isWalletConnect) {\n            setMode(\"approve\");\n        } else {\n            setMode(undefined);\n        }\n    }, [ethereum]);\n\n    useEffect(() => {\n        state.setSelectedLPToken();\n    }, [mode]);\n\n    useAsyncEffect(async () => {\n        if (provider && signer && state.selectedLPToken) {\n            setLoading(true);\n            state.setSelectedLPTokenAllowed(false);\n            try {\n                const minAllowance = ethers.BigNumber.from(2)\n                    .pow(96)\n                    .sub(1);\n                const allowance = await getTokenAllowance(state.selectedLPToken.address, SUSHI_ROLL);\n                state.setSelectedLPTokenAllowed(ethers.BigNumber.from(allowance).gte(minAllowance));\n            } finally {\n                setLoading(false);\n            }\n        }\n    }, [provider, signer, state.selectedLPToken]);\n\n    const onMigrate = useCallback(async () => {\n        if (mode && state.selectedLPToken && state.amount && provider && signer) {\n            setMigrating(true);\n            try {\n                const amount = parseBalance(state.amount, state.selectedLPToken.decimals);\n                const func = mode === \"approve\" ? migrate : migrateWithPermit;\n                const tx = await func(state.selectedLPToken, amount, signer);\n                await tx.wait();\n                await updateTokens();\n                await state.updateLPTokens();\n                state.setSelectedLPToken(undefined);\n            } finally {\n                setMigrating(false);\n            }\n        }\n    }, [mode, state.selectedLPToken, state.amount, provider, signer, migrateWithPermit, updateTokens]);\n\n    return {\n        ...state,\n        loading: state.loading || loading,\n        mode,\n        setMode,\n        onMigrate,\n        migrating\n    };\n};\n\nexport default useMigrateState;\n","import React, { useContext, useState } from \"react\";\nimport { Platform, View } from \"react-native\";\n\nimport useAsyncEffect from \"use-async-effect\";\nimport ApproveButton from \"../components/ApproveButton\";\nimport BackgroundImage from \"../components/BackgroundImage\";\nimport Border from \"../components/Border\";\nimport Button from \"../components/Button\";\nimport Container from \"../components/Container\";\nimport Content from \"../components/Content\";\nimport ErrorMessage from \"../components/ErrorMessage\";\nimport FetchingButton from \"../components/FetchingButton\";\nimport Heading from \"../components/Heading\";\nimport InfoBox from \"../components/InfoBox\";\nimport InsufficientBalanceButton from \"../components/InsufficientBalanceButton\";\nimport LPTokenSelect, { LPTokenItem } from \"../components/LPTokenSelect\";\nimport Meta from \"../components/Meta\";\nimport Select, { Option } from \"../components/Select\";\nimport Text from \"../components/Text\";\nimport Title from \"../components/Title\";\nimport TokenInput from \"../components/TokenInput\";\nimport WebFooter from \"../components/web/WebFooter\";\nimport { MigrateSubMenu } from \"../components/web/WebSubMenu\";\nimport { SUSHI_ROLL } from \"../constants/contracts\";\nimport { Spacing } from \"../constants/dimension\";\nimport { EthersContext } from \"../context/EthersContext\";\nimport useLinker from \"../hooks/useLinker\";\nimport useMigrateState, { MigrateMode, MigrateState } from \"../hooks/useMigrateState\";\nimport useTranslation from \"../hooks/useTranslation\";\nimport MetamaskError from \"../types/MetamaskError\";\nimport { isEmptyValue, parseBalance } from \"../utils\";\nimport Screen from \"./Screen\";\n\nconst MigrateScreen = () => {\n    const t = useTranslation();\n    return (\n        <Screen>\n            <Container>\n                <BackgroundImage />\n                <Content>\n                    <Title text={t(\"migrate-liquidity\")} />\n                    <Text light={true}>{t(\"migrate-liquidity-desc\")}</Text>\n                    <Migrate />\n                </Content>\n                {Platform.OS === \"web\" && <WebFooter />}\n            </Container>\n            <MigrateSubMenu />\n        </Screen>\n    );\n};\n\nconst Migrate = () => {\n    const { ethereum } = useContext(EthersContext);\n    const state = useMigrateState();\n    return (\n        <View style={{ marginTop: Spacing.large }}>\n            {!ethereum?.isWalletConnect && (\n                <>\n                    <MigrateModeSelect state={state} />\n                    <Border />\n                </>\n            )}\n            <UniswapLiquidityScreen state={state} />\n            <Border />\n            <AmountInput state={state} />\n            <AmountInfo state={state} />\n        </View>\n    );\n};\n\nconst MigrateModeSelect = ({ state }: { state: MigrateState }) => {\n    const t = useTranslation();\n    const options: Option[] = [\n        {\n            key: \"permit\",\n            title: t(\"non-hardware-wallet\"),\n            description: t(\"non-hardware-wallet-desc\")\n        },\n        {\n            key: \"approve\",\n            title: t(\"hardware-wallet\"),\n            description: t(\"hardware-wallet-desc\")\n        }\n    ];\n    return (\n        <Select\n            title={t(\"wallet-type\")}\n            options={options}\n            option={options.find(option => option.key === state.mode)}\n            setOption={option => state.setMode(option?.key as MigrateMode | undefined)}\n        />\n    );\n};\n\nconst UniswapLiquidityScreen = ({ state }: { state: MigrateState }) => {\n    const t = useTranslation();\n    if (!state.mode) {\n        return <Heading text={t(\"your-uniswap-liquidity\")} disabled={true} />;\n    }\n    return (\n        <LPTokenSelect\n            state={state}\n            title={t(\"your-uniswap-liquidity\")}\n            emptyText={\"You don't have any liquidity on Uniswap.\"}\n            Item={LPTokenItem}\n        />\n    );\n};\n\nconst AmountInput = ({ state }: { state: MigrateState }) => {\n    const t = useTranslation();\n    if (!state.selectedLPToken) {\n        return <Heading text={t(\"amount-of-tokens\")} disabled={true} />;\n    }\n    return (\n        <TokenInput\n            title={t(\"amount-of-tokens\")}\n            token={state.selectedLPToken}\n            amount={state.amount}\n            onAmountChanged={state.setAmount}\n        />\n    );\n};\n\nconst AmountInfo = ({ state }: { state: MigrateState }) => {\n    const disabled = !state.selectedLPToken || isEmptyValue(state.amount);\n    return (\n        <InfoBox>\n            <Meta label={state.selectedLPToken?.symbol || \"StandardHashrate LP\"} text={state.amount} disabled={disabled} />\n            <Controls state={state} />\n        </InfoBox>\n    );\n};\n\nconst Controls = ({ state }: { state: MigrateState }) => {\n    const [error, setError] = useState<MetamaskError>({});\n    useAsyncEffect(() => setError({}), [state.amount]);\n    return (\n        <View style={{ marginTop: Spacing.normal }}>\n            {!state.selectedLPToken || isEmptyValue(state.amount) ? (\n                <MigrateButton state={state} onError={setError} disabled={true} />\n            ) : parseBalance(state.amount, state.selectedLPToken.decimals).gt(state.selectedLPToken.balance) ? (\n                <InsufficientBalanceButton symbol={state.selectedLPToken.symbol} />\n            ) : state.loading ? (\n                <FetchingButton />\n            ) : (\n                <>\n                    {state.mode === \"approve\" && !state.selectedLPTokenAllowed && (\n                        <ApproveButton\n                            token={state.selectedLPToken}\n                            spender={SUSHI_ROLL}\n                            onSuccess={() => state.setSelectedLPTokenAllowed(true)}\n                            onError={setError}\n                        />\n                    )}\n                    <MigrateButton\n                        state={state}\n                        onError={setError}\n                        disabled={state.mode === \"approve\" && !state.selectedLPTokenAllowed}\n                    />\n                </>\n            )}\n            {error.message && error.code !== 4001 && <ErrorMessage error={error} />}\n        </View>\n    );\n};\n\nconst MigrateButton = ({\n    state,\n    onError,\n    disabled\n}: {\n    state: MigrateState;\n    onError: (e) => void;\n    disabled: boolean;\n}) => {\n    const t = useTranslation();\n    const goToFarm = useLinker(\"/farming\", \"Farming\");\n    const onPress = async () => {\n        onError({});\n        try {\n            await state.onMigrate();\n            goToFarm();\n        } catch (e) {\n            onError(e);\n        }\n    };\n    return <Button title={t(\"migrate-liquidity\")} loading={state.migrating} onPress={onPress} disabled={disabled} />;\n};\n\nexport default MigrateScreen;\n"],"sourceRoot":""}